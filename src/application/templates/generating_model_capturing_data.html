{% extends 'base.html' %}
{% block content %}
<button onclick="window.location.href='{{url_for('index') }}';" class="btn btn-primary btn-block"><i
        class="fa fa-home"></i> Home
</button>
<div class="row">
    <!---************************ First Column ************************-->
    <div id="myGestures" class="col-sm-3" style="background-color:#d4e6f1;">
        <h4>Available Gestures</h4>
        <!--    Click this button to start the gesture recording for the selected radio button-->
        <button type="button" onclick="changeImageURL()" class="btn btn-primary btn-lg btn-block">Start Recording
        </button>
        {% for k,v in gestures.items() %}
        <div>
            <input type="radio" name="selectGesture" id="radio_{{ k | lower }}" value="{{ k }}">
            <label>{{ k }}</label>
            <img src="{{ v }}" style="max-height: 150px;">
            <br>
        </div>
        {% endfor %}
    </div>

    <div class="col-sm-1"></div>
    <!---************************ Second Column ************************-->
    <div class="col-sm-4" style="background-color:#d4e6f1;">
        <h4> Input </h4>
        <div class="row">
            <div class="progress">
                <div class="progress-bar bg-info" role="progressbar" style="width: 0" aria-valuenow="0"
                     aria-valuemin="0" aria-valuemax="100">%0
                </div>
            </div>
        </div>
        <div class="row">
            <img src="static/img/hand_gestures.jpg" id="vid_display" width="100%" height="auto"/>
        </div>
        <div class="row">
            <h5><strong> Instructions: </strong></h5>
            <ul>
                <li> Press <strong>spacebar</strong> to start recording</li>
                <li> Press <strong>q</strong> to quit the recording</li>
                <li> Press <strong>n</strong> for next capture</li>
                <li> Press <strong>r</strong> to redo capture</li>
            </ul>
        </div>
    </div>
    <script>
        function changeImageURL() {
            var image = document.getElementById('vid_display');
            gesture_selected = $("input[type='radio'][name='selectGesture']:checked").val();

            url= "{{ url_for('record_gesture.video_feed', gesture_name='gesture_selected') }}";
            new_url = url.replace(/gesture_selected/, gesture_selected)
            console.log(new_url)

            image.src = new_url
        }
    </script>
    <!---->
    <div class="col-sm-1"></div>
    <!---************************ Third Column ************************-->
    <div class="col-sm-3" style="background-color:#d4e6f1;">
        <h4> Generate Model </h4>
        <div class="row" id="generateModel">
            <p style="text-align:center;"><strong> Captured Data </strong>
            <p>
            {% for k, v in captures.items() %}
            <div>{{ k }}
                <br>
                <img src="{{ v }}" style="max-height: 150px;">
            </div>
            {% endfor %}
        </div>
        <div class="row">
            <button type="button" onclick="{{url_for('record_data.generate_model')}}" class="btn btn-primary btn-lg btn-block">Generate Model</button>
        </div>
    </div>
</div>
{% endblock %}
